<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Capistrano::Deploy::Strategy::Remote</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Capistrano::Deploy::Strategy::Remote</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../../files/lib/capistrano/recipes/deploy/strategy/remote_rb.html">
                lib/capistrano/recipes/deploy/strategy/remote.rb
                </a>
        <br />
                <a href="../../../../files/lib/capistrano/recipes/deploy/strategy/remote_rb.html">
                lib/capistrano/recipes/deploy/strategy/remote.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Base.html">
                Base
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
An abstract superclass, which forms the base for all deployment strategies
which work by grabbing the code from the repository directly from remote
host. This includes deploying by checkout (the default), and deploying by
export.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001114">check!</a>&nbsp;&nbsp;
      <a href="#M001109">check!</a>&nbsp;&nbsp;
      <a href="#M001111">command</a>&nbsp;&nbsp;
      <a href="#M001116">command</a>&nbsp;&nbsp;
      <a href="#M001108">deploy!</a>&nbsp;&nbsp;
      <a href="#M001113">deploy!</a>&nbsp;&nbsp;
      <a href="#M001112">mark</a>&nbsp;&nbsp;
      <a href="#M001117">mark</a>&nbsp;&nbsp;
      <a href="#M001115">scm_run</a>&nbsp;&nbsp;
      <a href="#M001110">scm_run</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001114" class="method-detail">
        <a name="M001114"></a>

        <div class="method-heading">
          <a href="#M001114" class="method-signature">
          <span class="method-name">check!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001114-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001114-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 18</span>
18:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check!</span>
19:           <span class="ruby-keyword kw">super</span>.<span class="ruby-identifier">check</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
20:             <span class="ruby-identifier">d</span>.<span class="ruby-identifier">remote</span>.<span class="ruby-identifier">command</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">command</span>)
21:           <span class="ruby-keyword kw">end</span>
22:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001109" class="method-detail">
        <a name="M001109"></a>

        <div class="method-heading">
          <a href="#M001109" class="method-signature">
          <span class="method-name">check!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001109-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001109-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 18</span>
18:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check!</span>
19:           <span class="ruby-keyword kw">super</span>.<span class="ruby-identifier">check</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
20:             <span class="ruby-identifier">d</span>.<span class="ruby-identifier">remote</span>.<span class="ruby-identifier">command</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">command</span>)
21:           <span class="ruby-keyword kw">end</span>
22:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001108" class="method-detail">
        <a name="M001108"></a>

        <div class="method-heading">
          <a href="#M001108" class="method-signature">
          <span class="method-name">deploy!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes the <a href="../SCM.html">SCM</a> <a
href="Remote.html#M001111">command</a> for this strategy and writes the
REVISION <a href="Remote.html#M001112">mark</a> file to each host.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001108-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001108-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 14</span>
14:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deploy!</span>
15:           <span class="ruby-identifier">scm_run</span> <span class="ruby-node">&quot;#{command} &amp;&amp; #{mark}&quot;</span>
16:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001113" class="method-detail">
        <a name="M001113"></a>

        <div class="method-heading">
          <a href="#M001113" class="method-signature">
          <span class="method-name">deploy!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes the <a href="../SCM.html">SCM</a> <a
href="Remote.html#M001111">command</a> for this strategy and writes the
REVISION <a href="Remote.html#M001112">mark</a> file to each host.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001113-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001113-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 14</span>
14:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deploy!</span>
15:           <span class="ruby-identifier">scm_run</span> <span class="ruby-node">&quot;#{command} &amp;&amp; #{mark}&quot;</span>
16:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M001111" class="method-detail">
        <a name="M001111"></a>

        <div class="method-heading">
          <a href="#M001111" class="method-signature">
          <span class="method-name">command</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
An abstract method which must be overridden in subclasses, to return the
actual <a href="../SCM.html">SCM</a> <a
href="Remote.html#M001111">command</a>(s) which must be executed on each
target host in order to perform the deployment.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001111-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001111-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 39</span>
39:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">command</span>
40:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;`command' is not implemented by #{self.class.name}&quot;</span>
41:           <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001116" class="method-detail">
        <a name="M001116"></a>

        <div class="method-heading">
          <a href="#M001116" class="method-signature">
          <span class="method-name">command</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
An abstract method which must be overridden in subclasses, to return the
actual <a href="../SCM.html">SCM</a> <a
href="Remote.html#M001111">command</a>(s) which must be executed on each
target host in order to perform the deployment.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001116-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001116-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 39</span>
39:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">command</span>
40:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;`command' is not implemented by #{self.class.name}&quot;</span>
41:           <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001112" class="method-detail">
        <a name="M001112"></a>

        <div class="method-heading">
          <a href="#M001112" class="method-signature">
          <span class="method-name">mark</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="Remote.html#M001111">command</a> which will write the
identifier of the revision being deployed to the REVISION file on each
host.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001112-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001112-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 45</span>
45:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mark</span>
46:             <span class="ruby-node">&quot;(echo #{revision} &gt; #{configuration[:release_path]}/REVISION)&quot;</span>
47:           <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001117" class="method-detail">
        <a name="M001117"></a>

        <div class="method-heading">
          <a href="#M001117" class="method-signature">
          <span class="method-name">mark</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="Remote.html#M001111">command</a> which will write the
identifier of the revision being deployed to the REVISION file on each
host.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001117-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001117-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 45</span>
45:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mark</span>
46:             <span class="ruby-node">&quot;(echo #{revision} &gt; #{configuration[:release_path]}/REVISION)&quot;</span>
47:           <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001115" class="method-detail">
        <a name="M001115"></a>

        <div class="method-heading">
          <a href="#M001115" class="method-signature">
          <span class="method-name">scm_run</span><span class="method-args">(command)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Runs the given <a href="Remote.html#M001111">command</a>, filtering output
back through the handle_data filter of the <a href="../SCM.html">SCM</a>
implementation.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001115-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001115-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 28</span>
28:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scm_run</span>(<span class="ruby-identifier">command</span>)
29:             <span class="ruby-identifier">run</span>(<span class="ruby-identifier">command</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>,<span class="ruby-identifier">stream</span>,<span class="ruby-identifier">text</span><span class="ruby-operator">|</span>
30:               <span class="ruby-identifier">ch</span>[<span class="ruby-identifier">:state</span>] <span class="ruby-operator">||=</span> { <span class="ruby-identifier">:channel</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ch</span> }
31:               <span class="ruby-identifier">output</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">handle_data</span>(<span class="ruby-identifier">ch</span>[<span class="ruby-identifier">:state</span>], <span class="ruby-identifier">stream</span>, <span class="ruby-identifier">text</span>)
32:               <span class="ruby-identifier">ch</span>.<span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">output</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">output</span>
33:             <span class="ruby-keyword kw">end</span>
34:           <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001110" class="method-detail">
        <a name="M001110"></a>

        <div class="method-heading">
          <a href="#M001110" class="method-signature">
          <span class="method-name">scm_run</span><span class="method-args">(command)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Runs the given <a href="Remote.html#M001111">command</a>, filtering output
back through the handle_data filter of the <a href="../SCM.html">SCM</a>
implementation.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001110-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001110-source">
<pre>
    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 28</span>
28:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scm_run</span>(<span class="ruby-identifier">command</span>)
29:             <span class="ruby-identifier">run</span>(<span class="ruby-identifier">command</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>,<span class="ruby-identifier">stream</span>,<span class="ruby-identifier">text</span><span class="ruby-operator">|</span>
30:               <span class="ruby-identifier">ch</span>[<span class="ruby-identifier">:state</span>] <span class="ruby-operator">||=</span> { <span class="ruby-identifier">:channel</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ch</span> }
31:               <span class="ruby-identifier">output</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">handle_data</span>(<span class="ruby-identifier">ch</span>[<span class="ruby-identifier">:state</span>], <span class="ruby-identifier">stream</span>, <span class="ruby-identifier">text</span>)
32:               <span class="ruby-identifier">ch</span>.<span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">output</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">output</span>
33:             <span class="ruby-keyword kw">end</span>
34:           <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>