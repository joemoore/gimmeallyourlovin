<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: CHANGELOG.rdoc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>CHANGELOG.rdoc</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>CHANGELOG.rdoc
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Aug 16 23:07:08 -0700 2008</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h2>2.4.3 / June 28, 2008</h2>
<ul>
<li>Fix gem dependencies so gem actually understands them [Jamis Buck]

</li>
</ul>
<h2>2.4.2 / June 27, 2008</h2>
<ul>
<li>Specify gem dependencies in rakefile [Jamis Buck]

</li>
</ul>
<h2>2.4.1 / June 27, 2008</h2>
<ul>
<li>Use Echoe to manage the Rakefile [Jamis Buck]

</li>
<li>Let Net::SSH manage the default SSH port selection [Ben Lavender]

</li>
<li>Changed capture() helper to not raise an exception on error, but to warn
instead [Jeff Forcier]

</li>
</ul>
<h2>2.4.0 / June 13, 2008</h2>
<ul>
<li>Added :normalize_asset_timestamps option to deployment, defaulting to true,
which allows asset timestamping to be disabled [John Trupiano]

</li>
</ul>
<h2>2.4.0 Preview Release 1 (2.3.101) / June 5, 2008</h2>
<ul>
<li>Only make deploy:start, deploy:stop, and deploy:restart try sudo as
:runner. The other sudo-enabled tasks (deploy:setup, deploy:cleanup, etc.)
will now use the :admin_runner user (which by default is unset). [Jamis
Buck]

</li>
<li>Make sure triggers defined as a block inherit the scope of the task they
are attached to, instead of the task they were called from [Jamis Buck]

</li>
<li>Make deploy:upload use the upload() helper for more efficient directory
processing [Jamis Buck]

</li>
<li>Make deploy:upload accept globs [Mark Imbriaco]

</li>
<li>Make sure the host is reported with the output from scm_run [Jamis Buck]

</li>
<li>Make git SCM honor the :scm_verbose option [Jamis Buck]

</li>
<li>Don&#8216;t follow symlinks when using :copy_cache [Jamis Buck]

</li>
<li>If :mode is given to upload() helper, do a chmod after to set the mode
[Jamis Buck]

</li>
<li>Fix load_from_file method for windows users [Neil Wilson]

</li>
<li>Display a deprecation error if a remote git branch is specified [Tim
Harper]

</li>
<li>Fix deployment recipes to use the updated sudo helper [Jamis Buck]

</li>
<li>Enhance the sudo helper so it can be used to return the command, instead of
executing it [Jamis Buck]

</li>
<li>Revert &quot;make sudo helper play nicely with complex command
chains&quot;, since it broke stuff [Jamis Buck]

</li>
<li>Make set(:default_shell, false) work for not using a shell on a per-command
basis [Ryan McGeary]

</li>
<li>Improved test coverage [Ryan McGeary]

</li>
<li>Fixed &quot;coverage&quot; take task [Ryan McGeary]

</li>
<li>Use upload() instead of put() with the copy strategy [Jamis Buck]

</li>
<li>Revert the &quot;git fetch &#8212;tags&quot; change, since it didn&#8216;t
work as expected [Jamis Buck]

</li>
<li>Fix deploy:pending when using git SCM [Ryan McGeary]

</li>
<li>Make sure deploy:check works with :none scm (which has no default command)
[Jamis Buck]

</li>
<li>Add debug switch for enabling conditional execution of commands [Mark
Imbriaco]

</li>
</ul>
<h2>2.3.0 / May 2, 2008</h2>
<ul>
<li>Make deploy:setup obey the :use_sudo and :runner directives, and generalize
the :use_sudo and :runner options into a try_sudo() helper method [Jamis
Buck]

</li>
<li>Make sudo helper play nicely with complex command chains [Jamis Buck]

</li>
<li>Expand file-transfer options with new upload() and download() helpers.
[Jamis Buck]

</li>
<li>Allow SCP transfers in addition to SFTP. [Jamis Buck]

</li>
<li>Use Net::SSH v2 and Net::SSH::Gateway. [Jamis Buck]

</li>
<li>Added export method for git SCM [Phillip Goldenburg]

</li>
<li>For query_revision, git SCM used git-rev-parse on the repo hosting the
Capfile, which may NOT be the same tree as the actual source reposistory.
Use git-ls-remote instead to resolve the revision for checkout. [Robin H.
Johnson]

</li>
<li>Allow :ssh_options hash to be specified per server [Jesse Newland]

</li>
<li>Added support for depend :remote, :file to test for existence of a specific
file [Andrew Carter]

</li>
<li>Ensure that the default run options are mixed into the command options when
executing a command from the cap shell [Ken Collins]

</li>
<li>Added :none SCM module for deploying a specific directory&#8216;s contents
[Jamis Buck]

</li>
<li>Improved &quot;copy&quot; strategy supports local caching and pattern
exclusion (via :copy_cache and :copy_exclude variables) [Jamis Buck]

</li>
</ul>
<h2>2.2.0 / February 27, 2008</h2>
<ul>
<li>Fix git submodule support to init on sync [halorgium]

</li>
<li>Add alternative server-centric role definition method [James Duncan
Davidson]

</li>
<li>Add support for password prompts from the Mercurial SCM [ches]

</li>
<li>Add support for :max_hosts option in task definition or run() [Rob Holland
&lt;rob@inversepath.com&gt;]

</li>
<li>Distributed git support for better operability with remote_cache strategy
[voidlock]

</li>
<li>Use a default line length in help text if line length is otherwise too
small [Jamis Buck]

</li>
<li>Fix incorrect reference to the &#8216;setup&#8217; task in task
documentation [rajeshduggal]

</li>
<li>Don&#8216;t try to kill the spawner process on deploy:stop if no spawner
process exists [Jamis Buck]

</li>
<li>Dynamic roles (e.g. role(:app) { &quot;host.name&quot; }) [dmasover]

</li>
<li>Implement Bzr#next_revision so that pending changes can be reported
correctly [casret]

</li>
<li>Use a proper export command for bzr SCM [drudru]

</li>
<li>Use checkout instead of merge for git SCM [nuttycom]

</li>
<li>Fix typo in Subversion SCM module, encountered when an update fails
[kemiller]

</li>
<li>Fix documentation typo in upload.rb [evolving_jerk]

</li>
<li>Added test case to show that the :scm_command is honored by the git SCM
module [grempe]

</li>
<li>Fail gracefully when double-colons are used to delimit namespaces [richie]

</li>
<li>Add support for :git_enable_submodules variable, to enable submodules with
the git SCM [halorgium]

</li>
<li>If subversion asks for a password, prompt as a last resort [Jamis Buck]

</li>
<li>Use checkout &#8212;lightweight for bzr checkout, instead of branch
[michiels]

</li>
<li>Make sure bzr SCM works when revision is head (or unspecified) [michiels]

</li>
<li>Support p4sync_flags and p4client_root variables for Perforce [gseidman]

</li>
<li>Prepare for Net::SSH v2 by making sure <a
href="../classes/Capistrano.html">Capistrano</a> only tries to load
Net::SSH versions less than 1.99.0 [Jamis Buck]

</li>
</ul>
<h2>2.1.0 / October 14, 2007</h2>
<ul>
<li>Default to 0664 instead of 0660 on upload [Jamis Buck]

</li>
<li>Fix deploy:pending to query SCM for the subsequent revision so that it does
not include the last deployed change [Jamis Buck]

</li>
<li>Prefer &#8216;Last Changed Rev&#8217; over &#8216;Revision&#8217; when
querying latest revision via Subversion [Jamis Buck]

</li>
<li>Explicitly require &#8216;stringio&#8217; in copy_test [mislav]

</li>
<li>When Subversion#query_revision fails, give a more sane error [Jamis Buck]

</li>
<li>Don&#8216;t run the upgrade:revisions task on non-release servers [Jamis
Buck]

</li>
<li>Fix cap shell to properly recognize sudo prompt [Mark Imbriaco, barnaby,
Jamis Buck]

</li>
<li>Git SCM module [Garry Dolley, Geoffrey Grosenbach, Scott Chacon]

</li>
<li>Use the &#8212;password switch for subversion by default, but add
:scm_prefer_prompt variable (defaults to false) [Jamis Buck]

</li>
</ul>
<h2>2.0.100 (2.1 Preview 1) / September 1, 2007</h2>
<ul>
<li>capify-generated Capfile will autoload all recipes from
vendor/plugins/*/recipes/*.rb [Graeme Mathieson]

</li>
<li>Use sudo -p switch to set sudo password prompt to something predictable
[Mike Bailey]

</li>
<li>Allow independent configurations to require the same recipe file [Jamis
Buck]

</li>
<li>Set :shell to false to run a command without wrapping it in &quot;sh
-c&quot; [Jamis Buck]

</li>
<li>Don&#8216;t request a pty by default [Jamis Buck]

</li>
<li>Add a &quot;match&quot; remote dependency method [Adam Greene]

</li>
<li>Allow auth-caching of subversion credentials to be enabled via
:scm_auth_cache [tsmith]

</li>
<li>Don&#8216;t let a task trigger itself when used as the source for an
&quot;on&quot; hook [Jamis Buck]

</li>
<li>Avoid using the &#8212;password switch with subversion for security
purposes [sentinel]

</li>
<li>Add version_dir, current_dir, and shared_dir variables for naming the
directories used in deployment [drinkingbird]

</li>
<li>Use Windows-safe binary reads for reading file contents [Ladislav
Martincik]

</li>
<li>Add Accurev SCM support [Doug Barth]

</li>
<li>Use the :runner variable to determine who to sudo as for deploy:restart
[Graham Ashton]

</li>
<li>Add Namespaces#top to always return a reference to the topmost namespace
[Jamis Buck]

</li>
<li>Change the &quot;-h&quot; output so that it does not say that
&quot;-q&quot; is the default [Jamis Buck]

</li>
</ul>
<h2>2.0.0 / July 21, 2007</h2>
<ul>
<li>Make the &quot;no matching servers&quot; error more sane [halorgium]

</li>
<li>Make sure the invoke task gives a sane error when the COMMAND value is
omitted [halorgium]

</li>
<li>Make sure variables are conditionally set in the deploy recipes, so as not
to clobber values set elsewhere [Jamis Buck]

</li>
<li>Fix &quot;input stream is empty&quot; errors from HighLine on prompt [Jamis
Buck]

</li>
<li>Added &quot;synchronous_connect&quot; setting to try and work around SFTP
hangs for certain users [Jamis Buck]

</li>
<li>Auto-require the SSH shell service, to avoid race conditions [Jamis Buck]

</li>
<li>Add a millisecond sleep in upload to reduce CPU impact [Jamis Buck]

</li>
<li>Allow the logger to be set via Configuration#logger= [Jamis Buck]

</li>
<li>Allow $CAPISTRANO:HOST$ to be used in filenames to the put command [Jamis
Buck]

</li>
<li>Allow execute_on_servers to be called without a current task again [Jamis
Buck]

</li>
<li>Put $stdout in sync mode, so that Net::SSH prompts are displayed [Jamis
Buck]

</li>
<li>Make sure deploy:check aborts if it fails [Jamis Buck]

</li>
<li>Spelling corrections in docs [Tim Carey-Smith, Giles Bowkett]

</li>
</ul>
<h2>1.99.3 (2.0 Preview 4) / June 28, 2007</h2>
<ul>
<li>Don&#8216;t break task descriptions on a period that appears in the middle
of a sentence [Jamis Buck]

</li>
<li>Added support for :on_error =&gt; :continue in task definitions, allowing
tasks to effectively ignore connection and execution errors that occur as
they run [Rob Holland]

</li>
<li>Use correct parameters for Logger constructor in the SCM and Strategy base
initializers [Jamis Buck]

</li>
<li>Set LC_ALL=C before querying the revision, to make sure the output is in a
predictable locale and can be parsed predictably [via Leandro Nunes dos
Santos]

</li>
<li>Add :copy_remote_dir variable for the :copy strategy, to indicate where the
archive should be copied to on the remote servers [Jamis Buck]

</li>
<li>Make the awk use in the dependencies code work with POSIX awk [mcornick]

</li>
<li>Make variable accesses thread safe [via Adrian Danieli]

</li>
<li>Make user input for yes/no prompts work correctly in the Mercurial module
[Matthew Elder]

</li>
<li>Use single quotes to escape semicolon in find command, instead of a
backslash [via michael.italia@gmail.com]

</li>
<li>Better quoting of reserved characters in commands [Jamis Buck]

</li>
<li>Make sure Net::SSH versions prior to 1.1.0 still work [Jamis Buck]

</li>
<li>Allow the :hosts and :roles keys to accept lambdas, which will be evaluated
lazily to allow runtime selection of hosts and roles in tasks [Jamis Buck]

</li>
<li>Use `which&#8217; to test whether a command exists in the remote path,
instead of `test -p&#8217; [Jamis Buck]

</li>
<li>Make sure the connection factory is established synchronously, to avoid
multiple gateway instances being spawned [Jamis Buck]

</li>
<li>Make sure symlink and finalize_update tasks reference the most recent
release when called by themselves [Jamis Buck]

</li>
</ul>
<h2>1.99.2 (2.0 Preview 3) / June 15, 2007</h2>
<ul>
<li>CVS SCM module [Brian Phillips]

</li>
<li>Fix typo in Perforce SCM module [Chris Bailey]

</li>
<li>ssh_options &lt; server options when connecting [Jamis Buck]

</li>
<li>Logger defaults to $stderr instead of STDERR [lhartley]

</li>
<li>Use cp -RPp instead of -a in the remote cache strategy

</li>
<li>Make the UploadError exception include an array of the hosts that failed
[rob@inversepath.com]

</li>
<li>Allow &quot;empty&quot; roles to be declared [Jamis Buck]

</li>
<li>Mercurial SCM module [Tobias Luetke, Matthew Elder]

</li>
<li>Invoke all commands via sh (customizable via :default_shell) [Jamis Buck]

</li>
<li>Make sure all directories exist on each deploy which are necessary for
subsequent commands to succeed, since some SCM&#8216;s won&#8216;t save
empty directories [Matthew Elder]

</li>
<li>Add :default_environment variable, which is applied to every command

</li>
</ul>
<h2>1.99.1 (2.0 Preview 2) / May 10, 2007</h2>
<ul>
<li>Fix some documentation typos [eventualbuddha]

</li>
<li>Don&#8216;t retry failed connections if an explicit auth_methods list is
given [Chris Farms]

</li>
<li>Added support for load and exit callbacks, which get invoked when all
recipes have been loaded and when all requested tasks have been executed
[Jamis Buck]

</li>
<li>Added support for start and finish callbacks, which get invoked when any
task is called via the command-line [Jamis Buck]

</li>
<li>Make `capify&#8217; understand simple command-line switches [Jamis Buck]

</li>
<li>Make the server definition itself available to SSH channels, rather than
just the host name [Jamis Buck]

</li>
<li>Identify servers by their complete credentials in logs, rather than simply
by hostname [Jamis Buck]

</li>
<li>Uniquely identify servers based on hostname, port, and username, instead of
merely on hostname [Jamis Buck]

</li>
<li>Allow (e.g.) scm_command and local_scm_command to be set in the event of
different paths to the scm command on local vs. remote hosts. [Jamis Buck]

</li>
<li>Kill the &quot;deploy:app&quot; namespace and move those tasks into deploy,
directly. [Jamis Buck]

</li>
<li>Make sure &#8216;desc&#8217; applies to the next defined task, in any
namespace. [Jamis Buck]

</li>
<li>Fix shell so that servers for a task are correctly discovered. [Jamis Buck]

</li>
<li>Added before(), after(), and on() callback creation methods. [Jamis Buck]

</li>
<li>Fix broken check! method for some deployment strategies. [Jamis Buck]

</li>
<li>deploy:cold should also run migrations before starting the app [Jamis Buck]

</li>
<li>Make the copy strategy check out to a temporary directory [Jamis Buck]

</li>
</ul>
<h2>1.99.0 (2.0 Preview 1) / April 24, 2007</h2>
<ul>
<li>Add `capify&#8217; script to make it easier to prepare a project for
deployment using cap [Jamis Buck]

</li>
<li>Make sure the sudo helper understands the SuSE dialect of the sudo password
prompt [Steven Wisener]

</li>
<li>Fix synchronization issue with Gateway initialization [Doug Barth]

</li>
<li>Added opt-in &quot;compat&quot; and &quot;upgrade&quot; recipes for tasks
to aid in the upgrade process to <a
href="../classes/Capistrano.html">Capistrano</a> 2 [Jamis Buck]

</li>
<li>The deployment recipes are now opt-in. Just do &#8216;load
&quot;deploy&quot;&#8217; in your recipe script. [Jamis Buck]

</li>
<li>Added $CAPISTRANO:HOST$ placeholder in commands, which will be replaced
with the name of the host on which the command is executing [Jamis Buck]

</li>
<li>Added -e switch to explain specific task. Added -X to extend -x. Made -h
much briefer. Added -T to list known tasks. [Jamis Buck]

</li>
<li>Added namespaces for tasks [Jamis Buck]

</li>
<li>Merged the Configuration and Actor classes, performed various other massive
refactorings of the code [Jamis Buck]

</li>
</ul>
<h2>1.4.1 / February 24, 2007</h2>
<ul>
<li>Use the no-auth-cache option with subversion so that username/password
tokens do not get cached by capistrano usage [jonathan]

</li>
<li>Deprecated upper-cased variables [Jamis Buck]

</li>
<li>Make sure Actor#get does not close the SFTP channel (so subsequent SFTP
operations work) [Dov Murik]

</li>
<li>Add :env option to &#8216;run&#8217; (and friends) so that you can specify
environment variables to be injected into the new process&#8217;
environment [Mathieu Lajugie]

</li>
</ul>
<h2>1.4.0 / February 3, 2007</h2>
<ul>
<li>Use the auth info for subversion more consistently [Jamis Buck]

</li>
<li>Add a &quot;capture&quot; helper, for capturing the stdout of a remote
command and returning it as a string [Jamis Buck]

</li>
<li>Add a &quot;get&quot; helper, to pull a file from a remote server to the
localhost [bmihelac]

</li>
<li>Fix gateway to actually increment local_port if a port is in use, so that
multiple capistrano instances can run at the same time [Mark Imbriaco]

</li>
<li>Refactor the permissions tweaking in update_code to a separate task so that
people on shared hosts can override it as necessary [jaw6]

</li>
<li>Set umask during the setup task, so that intermediate directories are
created with the proper permissions [NeilW]

</li>
<li>Removed -c/&#8212;caprc switch, since the new load order renders it
meaningless (just use -f now) [Mike Bailey]

</li>
<li>Make sure the standard recipe loads first, so that .caprc and friends can
override what it defines. [Mike Bailey]

</li>
<li>Add support for a system-wide capistrano config file [Mike Bailey]

</li>
<li>Make cold_deploy call update instead of deploy (to avoid invoking the
restart task).

</li>
<li>Make the touch command run by update_code set the TZ to UTC, for consistent
setting of asset timestamps. [NeilW]

</li>
<li>Fix off-by-one bug in show_tasks width-computation [NeilW]

</li>
</ul>
<h2>1.3.1 / January 5, 2007</h2>
<ul>
<li>Fix connection problems when using gateways [Ezra Zygmuntowicz]

</li>
</ul>
<h2>1.3.0 / December 23, 2006</h2>
<ul>
<li>Deprecate rake integration in favor of invoking `cap&#8217; directly [Jamis
Buck]

</li>
<li>Make sure the CVS module references the repository explicitly in cvs_log
[weyus@att.net]

</li>
<li>Remove trace messages when loading a file [Jamis Buck]

</li>
<li>Cleaner error messages for authentication failures and command errors
[Jamis Buck]

</li>
<li>Added support for ~/.caprc, also -x and -c switches. [Jamis Buck]

</li>
<li>Updated migrate action to use db:migrate task in Rails instead of the
deprecated migrate task [DHH]

</li>
<li>Allow SSH user and port to be encoded in the hostname strings [Ezra
Zygmuntowicz]

</li>
<li>Fixed that new checkouts were not group-writable [DHH, Jamis Buck]

</li>
<li>Fixed that cap setup would use 755 on the deploy_to and shared directory
roots instead of 775 [DHH]

</li>
<li>Don&#8216;t run the cleanup task on servers marked no_release [Jamis Buck]

</li>
<li>Fix typo in default_io_proc so it correctly checks the stream parameter to
see if it is the error stream [Stephen Haberman]

</li>
<li>Make sure assets in images, javascripts, and stylesheets are touched after
updating the code, to ensure the asset timestamping feature of rails works
correctly [Jamis Buck]

</li>
<li>Added warning if password is prompted for and termios is not installed
[John Labovitz]

</li>
<li>Added :as option to sudo, so you can specify who the command is executed as
[Mark Imbriaco]

</li>
</ul>
<h2>1.2.0 / September 14, 2006</h2>
<ul>
<li>Add experimental &#8216;shell&#8217; task [Jamis Buck]

</li>
<li>Display file for external configurations, rather than inspected proc.
[Jamis Buck]

</li>
<li>Connect to multiple servers in parallel, rather than serially. [Jamis Buck]

</li>
<li>Add SCM module for Mercurial (closes 4150) [Matthew Elder]

</li>
<li>Remove unused line in SCM::Base (closes 5619) [chris@seagul.co.uk]

</li>
<li>More efficient &quot;svn log&quot; usage (closes 5620) [Anatol Pomozov]

</li>
<li>Better support for key passphrases in the SVN module (closes 5920)
[llasram@gmail.com]

</li>
<li>Fix missing default for :local in cvs.rb (closes 3645)
[jeremy@hinegardner.org]

</li>
<li>Fix awkward spacing in gemspec file (closes 3888) [grant@antiflux.org]

</li>
<li>Add support for :sudo variable to specify path to sudo (closes 4578)
[timothee.peignier@tryphon.org]

</li>
<li>Make previous_release return nil if there are no previous releases (closes
4959) [bdabney@cavoksolutions.com]

</li>
<li>Uncache releases list after update_code is called so that newly released
dir is included (closes 3766) [Jamis Buck]

</li>
<li>Allow the subversion scm to accept HTTPS certificates (closes 4792) [Jamis
Buck]

</li>
<li>Make sure rollbacks occur within the scope of the task that triggered them
[Jamis Buck]

</li>
<li>Fixed the default recipe to work with setups that haven&#8216;t yet gone
pids [DHH]

</li>
<li>Symlink and setup for shared/pids to tmp/pids [DHH]

</li>
<li>Fix some incorrect usage text (closes 4507) [gerry_shaw@yahoo.com]

</li>
<li>Added Actor#stream method that makes it easy to create cross-server streams
[DHH]. Example:

<pre>
  desc &quot;Run a tail on multiple log files at the same time&quot;
  task :tail_fcgi, :roles =&gt; :app do
    stream &quot;tail -f #{shared_path}/log/fastcgi.crash.log&quot;
  end
</pre>
</li>
<li>Make update_code and symlink a macro task under the name &quot;update&quot;
for easy of deploy to servers that does not run fcgis [DHH]

</li>
<li>Changed setup, update_code, rollback_code, and symlink to work on all
servers instead of only those in the :app, :web, and :db roles. A server
can opt out of being part of the release deployment by setting :no_release
=&gt; true [DHH]

</li>
<li>Added support for :except on task declarations as the opposite of :only
[DHH]. Example:

<pre>
  role :app, &quot;192.168.0.2&quot;
  role :file, &quot;192.168.0.3&quot;, :no_release =&gt; true

  task :symlink, :except =&gt; { :no_release =&gt; true } do
    on_rollback { run &quot;ln -nfs #{previous_release} #{current_path}&quot; }
    run &quot;ln -nfs #{current_release} #{current_path}&quot;
  end

  cap symlink # will not run on 192.168.0.3
</pre>
</li>
<li>Deprecate the -r/&#8212;recipe switch in favor of -f/&#8212;file (for more
make/rake-like semantics) [Jamis Buck]

</li>
<li>Fix gemspec to include a dependency on rake 0.7 [Jamis Buck]

</li>
<li>Added respect for ENV[&quot;HOSTS&quot;] that&#8216;ll be used instead of
the roles specified in the task definition [DHH]. Example:

<pre>
  HOSTS=192.168.0.1 cap setup # one-off setup for that server, doesn't need to be prespecified in the recipes file
</pre>
</li>
<li>Added respect for ENV[&quot;ROLES&quot;] that&#8216;ll be used instead of
the roles specified in the task definition [DHH]. Example:

<pre>
  task :setup, :roles =&gt; [ :app, :web, :db ]
    # normally this would run every where
  end

  ROLES=app cap setup # this will only run for the app role, overwritting the default declaration
</pre>
</li>
<li>Added :hosts option to task definition that allows you to specify
cross-cutting tasks [DHH]. Example:

<pre>
  task :setup, :hosts =&gt; [ &quot;06.example.com&quot;, &quot;01.example.com&quot; ] do
    # this task will happen on 06 and 01 regardless of which roles they belong to
  end
</pre>
</li>
<li>Fix operator precedence problem in script for touching the revisions.log
3223 [jason.garber@emu.edu]

</li>
</ul>
<h2>1.1.0 / March 6th, 2006</h2>
<ul>
<li>Simplify the generated capistrano.rake file, and make it easier to
customize

</li>
<li>Use rake-like command-line semantics (&quot;cap deploy&quot;, in addition
to &quot;cap -a deploy&quot;)

</li>
<li>Rename to capistrano

</li>
<li>Make the generated capistrano.rake file use rake namespaces, and include
all default tasks

</li>
<li>Look for config/deploy.rb, capfile, and Capfile by default

</li>
</ul>
<h2>1.0.1 / February 20th, 2006</h2>
<ul>
<li>Fix broken switchtower_invoke function in switchtower.rake (missing require
statement)

</li>
</ul>
<h2>1.0.0 / Feburary 18th, 2006</h2>
<ul>
<li>Make CVS module&#8216;s :local value default to &quot;.&quot;

</li>
<li>Add &quot;invoke&quot; task for executing one-off commands

</li>
<li>Make port selection smarter for gateway connections

</li>
<li>Add extension mechanism for custom ST operations and third-party task
libraries

</li>
<li>Make ST rails rake tasks more configurable

</li>
<li>Add Actor#current_task and simplify Task#servers

</li>
<li>Add Actor#connect! method for working around lazy connection establishing

</li>
<li>Make sure IO::TRUNC is specified for Net::SFTP uploads (3510)

</li>
<li>Add branch support to CVS [jeremy@hinegardner.org] (3596)

</li>
<li>Add bazaar-ng SCM module [Damien Merenne]

</li>
<li>Add optional :svn_username and :svn_password variables

</li>
<li>Allow Proc-valued variables to be set more conveniently (set(:foo) {
&quot;bar&quot; })

</li>
<li>Add perforce SCM module [Richard McMahon]

</li>
<li>Add bazaar (v1) SCM module [Edd Dumbill] (3533)

</li>
<li>Fix stftime format string used in CVS module to be Windows-compatible
(fixes 3383)

</li>
<li>Add an better error when a task is run and no servers match the required
conditions

</li>
<li>Add default spinner and cold_deploy tasks, and spinner_user variable

</li>
<li>Changed restart_via variable to (boolean) use_sudo

</li>
<li>Only chmod when the revisions.log file is first created

</li>
<li>Make UPPERCASE variables work

</li>
<li>Added rails_env variable (defaults to production) for use by tasks that
employ the RAILS_ENV environment variable

</li>
<li>Added Actor.default_io_proc

</li>
<li>Set :actor key on SSH channel instances

</li>
</ul>
<h2>0.10.0 / January 2nd, 2006</h2>
<ul>
<li>Handle ssh password prompts like &quot;someone&#8216;s password:&quot;

</li>
<li>Make CLI#echo available as a class method.

</li>
<li>Add CLI#with_echo.

</li>
<li>Make the default password prompt available as a class method.

</li>
</ul>
<p>
# Add documentation for the CLI class.
</p>
<ul>
<li>Add a sanity check to make sure the correct versions of Net::SSH and
Net::SFTP are installed.

</li>
<li>Added a cleanup task to remove unused releases from the deployment
directory

</li>
<li>Allow password to be reentered on sudo if it was entered incorrectly

</li>
<li>Use &amp;&amp; as the command separator for the checkouts, so that errors
are caught early.

</li>
<li>Ping each SSH connection every 1s during command processing so that
long-running commands don&#8216;t cause the connection to timeout.

</li>
<li>Add a 0.01s sleep during the command loop so that the CPU doesn&#8216;t go
ballistic while ST is doing its thing.

</li>
<li>Add :restart_via variable for specifying whether restart ought to use :sudo
(default, use sudo)

</li>
<li>Use SFTP for file transfers (if available).

</li>
<li>Add an &quot;update_current&quot; task that will do an svn up on the
current release

</li>
<li>Use the :checkout variable to determine what operation to use for svn
checkouts (instead of co, like &quot;export&quot;).

</li>
<li>The Rails rake tasks now load ST directly, instead of invoking it via
system

</li>
<li>Added ssh_options variable to configure the SSH connection parameters 2734
[jerrett@bravenet.com]

</li>
<li>Require Net::SSH 1.0.5

</li>
</ul>
<h2>0.9.0 / October 18th, 2005</h2>
<ul>
<li>Use process reaper instead of custom reap script for restarting

</li>
<li>Use -S switch to set variables before reading recipe files 2242

</li>
<li>Have setup.rb create a switchtower.cmd file on Win32 platforms 2402

</li>
<li>Add diff_from_last_deploy to the rails switchtower rakefile template

</li>
<li>Add diff_from_last_deploy task (currently only works with subversion)

</li>
<li>Add deploy_with_migrations task.

</li>
<li>Make the migrate task more customizable.

</li>
<li>If no password is given with the -p switch, prompt for password
immediately.

</li>
<li>Do not install a switchtower stub in the script directory. Assume the
switchtower executable is in the path.

</li>
<li>Remove trailing newlines from commands to prevent trailing backslash 2141

</li>
<li>Default parameters work correctly with the generator 2218 [Scott Barron]

</li>
<li>Attempt to require &#8216;rubygems&#8217; explicitly when running the
switchtower utility 2134

</li>
<li>Make default tasks work only on app/db/web roles, so that additional roles
may be created for boxes with specific needs without needing to (for
instance) deploy the app to those boxes

</li>
<li>Default the application name to &quot;Application&quot; when using
&#8212;apply-to

</li>
<li>Show the help screen instead of an error when no arguments are given

</li>
<li>Make SwitchTower easier to invoke programmatically via SwitchTower::CLI

</li>
<li>Specify the revision to release via the :revision variable (defaults to
latest revision)

</li>
<li>Allow variables to be set via the cli using the -s switch

</li>
<li>Log checkouts to a &quot;revisions.log&quot; file

</li>
<li>Changed behavior of checkout to use the timestamp as the release name,
instead of the revision number

</li>
<li>Added CVS module (very very experimental!)

</li>
<li>Works with public keys now, for passwordless deployment

</li>
<li>Subversion module recognizes the password prompt for HTTP authentication

</li>
<li>Preserve +x on scripts when using darcs 1929 [Scott Barron]

</li>
<li>When executing multiline commands, use a backslash to escape the newline

</li>
</ul>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>