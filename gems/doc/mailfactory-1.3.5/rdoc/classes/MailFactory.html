<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: MailFactory</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">MailFactory</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/mailfactory_rb.html">
                lib/mailfactory.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
An easy class for creating a mail message
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M003236">add_attachment</a>&nbsp;&nbsp;
      <a href="#M003237">add_attachment_as</a>&nbsp;&nbsp;
      <a href="#M003222">add_header</a>&nbsp;&nbsp;
      <a href="#M003238">attach</a>&nbsp;&nbsp;
      <a href="#M003239">attach_as</a>&nbsp;&nbsp;
      <a href="#M003241">body_to_s</a>&nbsp;&nbsp;
      <a href="#M003242">buildattachmentboundary</a>&nbsp;&nbsp;
      <a href="#M003243">buildbodyboundary</a>&nbsp;&nbsp;
      <a href="#M003233">construct</a>&nbsp;&nbsp;
      <a href="#M003244">file_encode</a>&nbsp;&nbsp;
      <a href="#M003235">generate_boundary</a>&nbsp;&nbsp;
      <a href="#M003231">get_header</a>&nbsp;&nbsp;
      <a href="#M003240">headers_to_s</a>&nbsp;&nbsp;
      <a href="#M003228">html=</a>&nbsp;&nbsp;
      <a href="#M003230">method_missing</a>&nbsp;&nbsp;
      <a href="#M003232">multipart?</a>&nbsp;&nbsp;
      <a href="#M003221">new</a>&nbsp;&nbsp;
      <a href="#M003249">quote_address_if_necessary</a>&nbsp;&nbsp;
      <a href="#M003248">quote_if_necessary</a>&nbsp;&nbsp;
      <a href="#M003246">quoted_printable_encode</a>&nbsp;&nbsp;
      <a href="#M003247">quoted_printable_encode_header</a>&nbsp;&nbsp;
      <a href="#M003245">quoted_printable_with_instruction</a>&nbsp;&nbsp;
      <a href="#M003229">rawhtml=</a>&nbsp;&nbsp;
      <a href="#M003223">remove_header</a>&nbsp;&nbsp;
      <a href="#M003226">replyto</a>&nbsp;&nbsp;
      <a href="#M003225">replyto=</a>&nbsp;&nbsp;
      <a href="#M003224">set_header</a>&nbsp;&nbsp;
      <a href="#M003227">text=</a>&nbsp;&nbsp;
      <a href="#M003234">to_s</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VERSION</td>
          <td>=</td>
          <td class="context-item-value">'1.3.5'</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M003221" class="method-detail">
        <a name="M003221"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003221.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003221.html');return false;">
          <span class="method-name">new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M003236" class="method-detail">
        <a name="M003236"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003236.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003236.html');return false;">
          <span class="method-name">add_attachment</span><span class="method-args">(filename, type=nil, attachmentheaders = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
adds an attachment to the mail. Type may be given as a mime type. If it is
left off and the <a href="MIME/Types.html">MIME::Types</a> module is
available it will be determined automagically. If the optional
attachemntheaders is given, then they will be added to the attachment
boundary in the email, which can be used to produce Content-ID markers.
attachmentheaders can be given as an Array or a String.
</p>
        </div>
      </div>

      <div id="method-M003237" class="method-detail">
        <a name="M003237"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003237.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003237.html');return false;">
          <span class="method-name">add_attachment_as</span><span class="method-args">(file, emailfilename, type=nil, attachmentheaders = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
adds an attachment to the mail as emailfilename. Type may be given as a
mime type. If it is left off and the <a
href="MIME/Types.html">MIME::Types</a> module is available it will be
determined automagically. file may be given as an IO stream (which will be
read until the end) or as a filename. If the optional attachemntheaders is
given, then they will be added to the attachment boundary in the email,
which can be used to produce Content-ID markers. attachmentheaders can be
given as an Array of a String.
</p>
        </div>
      </div>

      <div id="method-M003222" class="method-detail">
        <a name="M003222"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003222.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003222.html');return false;">
          <span class="method-name">add_header</span><span class="method-args">(header, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
adds a header to the bottom of the headers
</p>
        </div>
      </div>

      <div id="method-M003238" class="method-detail">
        <a name="M003238"></a>

        <div class="method-heading">
          <span class="method-name">attach</span><span class="method-args">(filename, type=nil, attachmentheaders = nil)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="MailFactory.html#M003236">add_attachment</a>
</p>
        </div>
      </div>

      <div id="method-M003239" class="method-detail">
        <a name="M003239"></a>

        <div class="method-heading">
          <span class="method-name">attach_as</span><span class="method-args">(file, emailfilename, type=nil, attachmentheaders = nil)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="MailFactory.html#M003237">add_attachment_as</a>
</p>
        </div>
      </div>

      <div id="method-M003233" class="method-detail">
        <a name="M003233"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003233.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003233.html');return false;">
          <span class="method-name">construct</span><span class="method-args">(options = Hash.new)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
builds an email and returns it as a string. Takes the following options:
</p>
<table>
<tr><td valign="top"><tt>:messageid</tt>:</td><td>Adds a message id to the message based on the from header (defaults to
false)

</td></tr>
<tr><td valign="top"><tt>:date</tt>:</td><td>Adds a date to the message if one is not present (defaults to true)

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M003235" class="method-detail">
        <a name="M003235"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003235.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003235.html');return false;">
          <span class="method-name">generate_boundary</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
generates a unique boundary string
</p>
        </div>
      </div>

      <div id="method-M003231" class="method-detail">
        <a name="M003231"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003231.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003231.html');return false;">
          <span class="method-name">get_header</span><span class="method-args">(header)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns the value (or values) of the named header in an array
</p>
        </div>
      </div>

      <div id="method-M003228" class="method-detail">
        <a name="M003228"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003228.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003228.html');return false;">
          <span class="method-name">html=</span><span class="method-args">(newhtml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
sets the HTML body of the message. Only the body of the html should be
provided
</p>
        </div>
      </div>

      <div id="method-M003230" class="method-detail">
        <a name="M003230"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003230.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003230.html');return false;">
          <span class="method-name">method_missing</span><span class="method-args">(methId, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
implement method missing to provide helper methods for setting and getting
headers. Headers with &#8217;-&#8217; characters may be set/gotten as
&#8216;x_mailer&#8217; or &#8216;XMailer&#8217; (splitting will occur
between capital letters or on &#8216;_&#8217; chracters)
</p>
        </div>
      </div>

      <div id="method-M003232" class="method-detail">
        <a name="M003232"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003232.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003232.html');return false;">
          <span class="method-name">multipart?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns true if the email is multipart
</p>
        </div>
      </div>

      <div id="method-M003229" class="method-detail">
        <a name="M003229"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003229.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003229.html');return false;">
          <span class="method-name">rawhtml=</span><span class="method-args">(newhtml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
sets the HTML body of the message. The entire HTML section should be
provided
</p>
        </div>
      </div>

      <div id="method-M003223" class="method-detail">
        <a name="M003223"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003223.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003223.html');return false;">
          <span class="method-name">remove_header</span><span class="method-args">(header)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
removes the named header - case insensitive
</p>
        </div>
      </div>

      <div id="method-M003226" class="method-detail">
        <a name="M003226"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003226.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003226.html');return false;">
          <span class="method-name">replyto</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M003225" class="method-detail">
        <a name="M003225"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003225.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003225.html');return false;">
          <span class="method-name">replyto=</span><span class="method-args">(newreplyto)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M003224" class="method-detail">
        <a name="M003224"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003224.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003224.html');return false;">
          <span class="method-name">set_header</span><span class="method-args">(header, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
sets a header (removing any other versions of that header)
</p>
        </div>
      </div>

      <div id="method-M003227" class="method-detail">
        <a name="M003227"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003227.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003227.html');return false;">
          <span class="method-name">text=</span><span class="method-args">(newtext)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
sets the plain text body of the message
</p>
        </div>
      </div>

      <div id="method-M003234" class="method-detail">
        <a name="M003234"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003234.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003234.html');return false;">
          <span class="method-name">to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns a formatted email - equivalent to <a
href="MailFactory.html#M003233">construct</a>(:messageid =&gt; true)
</p>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M003241" class="method-detail">
        <a name="M003241"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003241.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003241.html');return false;">
          <span class="method-name">body_to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns the body as a properly formatted string
</p>
        </div>
      </div>

      <div id="method-M003242" class="method-detail">
        <a name="M003242"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003242.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003242.html');return false;">
          <span class="method-name">buildattachmentboundary</span><span class="method-args">(attachment)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
builds a boundary string for including attachments in the body, expects an
attachment hash as built by <a
href="MailFactory.html#M003236">add_attachment</a> and <a
href="MailFactory.html#M003237">add_attachment_as</a>
</p>
        </div>
      </div>

      <div id="method-M003243" class="method-detail">
        <a name="M003243"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003243.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003243.html');return false;">
          <span class="method-name">buildbodyboundary</span><span class="method-args">(type, encoding)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
builds a boundary string for inclusion in the body of a message
</p>
        </div>
      </div>

      <div id="method-M003244" class="method-detail">
        <a name="M003244"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003244.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003244.html');return false;">
          <span class="method-name">file_encode</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns a base64 encoded version of the contents of str
</p>
        </div>
      </div>

      <div id="method-M003240" class="method-detail">
        <a name="M003240"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003240.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003240.html');return false;">
          <span class="method-name">headers_to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns the @headers as a properly formatted string
</p>
        </div>
      </div>

      <div id="method-M003249" class="method-detail">
        <a name="M003249"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003249.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003249.html');return false;">
          <span class="method-name">quote_address_if_necessary</span><span class="method-args">(address, charset)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Quote the given address if it needs to be. The address may be a regular
email address, or it can be a phrase followed by an address in brackets.
The phrase is the only part that will be quoted, and only if it needs to
be. This allows extended characters to be used in the &quot;to&quot;,
&quot;from&quot;, &quot;cc&quot;, and &quot;bcc&quot; headers.
</p>
        </div>
      </div>

      <div id="method-M003248" class="method-detail">
        <a name="M003248"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003248.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003248.html');return false;">
          <span class="method-name">quote_if_necessary</span><span class="method-args">(text, charset, instruction = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Quote the given text if it contains any &quot;illegal&quot; characters
</p>
        </div>
      </div>

      <div id="method-M003246" class="method-detail">
        <a name="M003246"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003246.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003246.html');return false;">
          <span class="method-name">quoted_printable_encode</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
rfc2045 compatible. use rfc2047 for headers (such as the Subject line)
instead
</p>
        </div>
      </div>

      <div id="method-M003247" class="method-detail">
        <a name="M003247"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003247.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003247.html');return false;">
          <span class="method-name">quoted_printable_encode_header</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convert the given character to quoted printable format see <a
href="http://tools.ietf.org/html/rfc2047">tools.ietf.org/html/rfc2047</a>
</p>
        </div>
      </div>

      <div id="method-M003245" class="method-detail">
        <a name="M003245"></a>

        <div class="method-heading">
          <a href="MailFactory.src/M003245.html" target="Code" class="method-signature"
            onclick="popupCode('MailFactory.src/M003245.html');return false;">
          <span class="method-name">quoted_printable_with_instruction</span><span class="method-args">(text, charset)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Convert the given text into quoted printable format, with an instruction
that the text be eventually interpreted in the given charset.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>